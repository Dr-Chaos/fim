<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>Fim - File Integrity Manager</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="icon" type="image/x-icon" href="images/favicon/favicon.ico" /></head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_fim_file_integrity_manager">Fim - File Integrity Manager</a>
<ul class="sectlevel1">
<li><a href="#_why_do_you_need_fim">1. Why do you need Fim</a></li>
<li><a href="#_how_does_it_work">2. How does it work</a></li>
<li><a href="#_fim_workflow">3. Fim workflow</a></li>
<li><a href="#_most_common_use_cases">4. Most Common use cases</a>
<ul class="sectlevel2">
<li><a href="#_managing_a_workspace">4.1. Managing a workspace</a></li>
<li><a href="#_duplicates_detection_and_removal">4.2. Duplicates detection and removal</a></li>
<li><a href="#_backup_integrity">4.3. Backup integrity</a></li>
</ul>
</li>
<li><a href="#_fim_usage">5. Fim usage</a></li>
<li><a href="#_how_can_you_use_fim">6. How can you use Fim</a>
<ul class="sectlevel2">
<li><a href="#_download_a_fim_release">6.1. Download a Fim release</a></li>
<li><a href="#_fim_changelog">6.2. Fim changelog</a></li>
<li><a href="#_run_fim_using_docker">6.3. Run Fim using Docker</a></li>
<li><a href="#_build_fim">6.4. Build Fim</a></li>
</ul>
</li>
<li><a href="#_simple_example">7. Simple example</a>
<ul class="sectlevel2">
<li><a href="#_step_by_step">7.1. Step by step</a></li>
<li><a href="#_the_fim_log">7.2. The Fim log</a></li>
<li><a href="#_rollback_all_the_commit">7.3. Rollback all the commit</a></li>
<li><a href="#_commit_using_super_fast_mode">7.4. Commit using super-fast mode</a></li>
<li><a href="#_again_nothing_is_modified_now">7.5. Again, nothing is modified now</a></li>
<li><a href="#_display_the_fim_log">7.6. Display the Fim log</a></li>
<li><a href="#_state_file_content">7.7. State file content</a></li>
</ul>
</li>
<li><a href="#_real_life_example">8. Real life example</a>
<ul class="sectlevel2">
<li><a href="#_initialize_the_big_fim_repository">8.1. Initialize the big Fim repository</a></li>
<li><a href="#_check_the_status_very_quickly">8.2. Check the status very quickly</a></li>
<li><a href="#_check_the_status_more_accurately">8.3. Check the status more accurately</a></li>
<li><a href="#_full_status_checking">8.4. Full status checking</a></li>
<li><a href="#_checking_without_hashing">8.5. Checking without hashing</a></li>
</ul>
</li>
<li><a href="#_super_fast_commit">9. Super-fast commit</a></li>
<li><a href="#_dealing_with_duplicates">10. Dealing with duplicates</a>
<ul class="sectlevel2">
<li><a href="#_duplicates_inside_a_fim_repository">10.1. Duplicates inside a Fim repository</a></li>
<li><a href="#_duplicates_that_are_outside">10.2. Duplicates that are outside</a></li>
</ul>
</li>
<li><a href="#_file_permissions_management">11. File permissions management</a></li>
<li><a href="#_hardware_corruption_detection">12. Hardware corruption detection</a>
<ul class="sectlevel2">
<li><a href="#_false_positive">12.1. False positive</a></li>
</ul>
</li>
<li><a href="#_faq">13. FAQ</a>
<ul class="sectlevel2">
<li><a href="#_run_fim_commands_from_a_sub_directory">13.1. Run Fim commands from a sub-directory</a></li>
<li><a href="#_ignore_some_difference_during_state_comparison">13.2. Ignore some difference during State comparison</a></li>
<li><a href="#_ignoring_files_or_directories">13.3. Ignoring files or directories</a></li>
<li><a href="#_changing_default_hash_mode">13.4. Changing default hash mode</a></li>
<li><a href="#_hash_files_in_multi_thread">13.5. Hash files in multi-thread</a></li>
<li><a href="#_state_integrity">13.6. State integrity</a></li>
<li><a href="#_cross_platform_compatibility">13.7. Cross platform compatibility</a></li>
</ul>
</li>
<li><a href="#_fim_requirements">14. Fim requirements</a></li>
<li><a href="#_supported_os">15. Supported OS</a></li>
<li><a href="#_they_talked_about_it">16. They talked about it</a></li>
<li><a href="#_about">17. About</a></li>
<li><a href="#_license">18. License</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
<link rel="manifest" href="images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link href="http://fonts.googleapis.com/css?family=Roboto:400,500,700,900" rel="stylesheet" type="text/css">

<link rel="stylesheet" href="css/style.css">

<style type="text/css">
    .listingblock pre.highlightjs > code {
        background: rgb(247, 247, 248);
    }
</style>

<script src="http://code.jquery.com/jquery-2.2.3.min.js"></script>

<script>
    $(document).ready(function () {
        var offset = 250;
        var duration = 700;

        if ($(this).scrollTop() <= offset) {
            $('.back-to-top').fadeOut(0);
        }

        $(window).scroll(function () {
            if ($(this).scrollTop() > offset) {
                $('.back-to-top').fadeIn(duration);
            } else {
                $('.back-to-top').fadeOut(duration);
            }
        });

        $('.back-to-top').click(function (event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, duration);
            return false;
        })
    });
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-65608268-1', 'auto');
    ga('send', 'pageview');
</script>

<p>
    <a href="https://github.com/evrignaud/fim"><img
		style="position: fixed; top: 0; right: 0; border: 0; z-index: 1000; margin: 0;"
		src="images/fork_me_on_github-top-right.png" alt="Fork me on GitHub"/>
	</a>
    <a href="#" class="back-to-top"><img
		style="position: fixed; bottom: 0; right: 0; border: 0; z-index: 1000; margin: 20px 20px 20px;"
		src="images/icons/back_to_top.png" title="Back to top" alt="Back to top"/>
	</a>
</p>
</div>
</div>
<h1 id="_fim_file_integrity_manager" class="sect0">Fim - File Integrity Manager</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Version 1.2.1</p>
</div>
<hr>
<div class="paragraph">
	<p align="center">
		<img src="images/icons/fim-128.png" alt="Fim">
	</p>
</div>
<div class="paragraph">
<p>The purpose of Fim is to manage a set of files and be able to see quickly the files you are working on and be sure that files are not tampered.<br>
When you do a lot of stuff at the same time, things take time and Fim is here to help you to figure out what you were doing before.</p>
</div>
<div class="paragraph">
<p>Fim allow you to quickly get the status of all kind of files.
It can be photos, videos or a complete disk tree. You can manage them with a spirit that looks like Git.</p>
</div>
<div class="paragraph">
<p>On a daily workflow, you can know the files that have been added, modified, removed, moved, renamed and duplicated.
When you are working with files and you are also very busy, it&#8217;s difficult to remind what are the files you were working on previously.
A VCS can help you for this.
Unfortunately when you are working with photos or videos, or other kind of big binary files you cannot manage them with a tool like Git.<br>
Fim is meant to solve that.</p>
</div>
<div class="paragraph">
<p>Each time you have a stable set of files you can commit them to store their properties into a State and be able to compare it with your set of files later.</p>
</div>
<div class="paragraph">
<p>The big difference with Git is that Fim does not keep track of the different contents of the files that are managed.<br>
This is why we can call it an UnVersioned Control System (UVCS).</p>
</div>
<div class="paragraph">
<p>Fim is able to manage hundreds of thousands of files with a total size of several terabytes.
This kind of file tree could not be managed by Git.</p>
</div>
<div class="paragraph">
<p>Using Fim you can also easily detect duplicates and remove them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_do_you_need_fim">1. Why do you need Fim</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can check the integrity of you files using filesystems capabilities. For example <code>btrfs</code> comes with the
<a href="https://github.com/kdave/btrfs-progs/blob/devel/Documentation/btrfs-scrub.asciidoc">scrub</a> command that reads all data from the disk and verifies checksums.</p>
</div>
<div class="paragraph">
<p>Fim has a different use case. It allows you to see files you are working on that you have modified, moved or deleted.<br>
With <code>btrfs</code> all those files would have appeared as OK.</p>
</div>
<div class="paragraph">
<p>Fim allows you also to check the integrity of files with filesystems that do not maintain file checksums.<br>
For example you will be able to detect hardware corruption on a DVD. You simply have to burn the complete Fim repository on the DVD, all the files and the <code>.fim</code> content.<br>
You can verify the integrity of this DVD by going on the top of the DVD and type <code>fim st</code> or <code>fim dcor</code>.
More details in <a href="#_hardware_corruption_detection">Hardware corruption detection</a>.</p>
</div>
<div class="paragraph">
<p>The Fim States could also be corrupted. To do so the State content is hashed and each time Fim loads a State, it checks his integrity by recalculating the State hash.
More details in <a href="#_state_integrity">State integrity</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_does_it_work">2. How does it work</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fim creates an index of the files that are managed. It contains for each
file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>File name &amp; length</p>
</li>
<li>
<p>File attributes (dates, permissions)</p>
</li>
<li>
<p>Hash of 3 small blocks</p>
</li>
<li>
<p>Hash of 3 medium blocks</p>
</li>
<li>
<p>Hash of the full file content</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The 3 blocks that are hashed are one at the beginning, one in the middle and one at the end.<br>
The block that is hashed at the beginning is not the first one. Most of the files contain headers, so to produce accurate hash
we skip the first block and hash the second one.
When the file size is less than twice the block size we hash the first block.</p>
</div>
<div class="paragraph">
<p>The small block size is 4 KB and the medium block size is 1 MB.<br>
The hash algorithm that is used is SHA-512.</p>
</div>
<div class="paragraph">
<p>More details regarding file permissions can be found in <a href="#_file_permissions_management">File permissions management</a>.</p>
</div>
<div class="paragraph">
<p>The index is called a <code>State</code> and acts like the Central Directory does for a Zip file.
All the data generated by Fim are stored into the <code>.fim</code> located into the root directory of the Fim repository.</p>
</div>
<div class="paragraph">
<p>Fim keeps each version of the different State that has been committed.<br>
But you cannot use them to retrieve the content of one file that you may have lost.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
<strong>Fim does not replace a backup software</strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fim_workflow">3. Fim workflow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First you need to initialize the Fim repository using the <code>init</code> command.
This will record the first State of your file tree.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim init</code></pre>
</div>
</div>
<div class="paragraph">
<p>After having done modifications into the file tree, you can compare get the status that will show the differences between the recorded State and
the current file tree using the <code>status</code> command. You can do a full status check that will compare the hash of all the files.
It can be slow as all the file contents will be read and hashed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim st</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can compare quickly using the fast mode. <strong>With this option you can miss some modified files.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim st -f</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can compare quicker using the super-fast mode. <strong>With this option you can miss some modified files.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim st -s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Otherwise, you can request to not hash file content using the <code>-n</code> option. It will compare only the file names, file length, modification dates and permissions.
You will not be able to detect files that have been renamed or duplicated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim st -n</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each time you want to record the State of the current file tree you can use the <code>commit</code> command.<br>
It&#8217;s a time consuming operation that will compute hash of every file contents.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim ci -c "My commit comment"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to commit faster you can use the Super-fast commit. More details in <a href="#_super_fast_commit">Super-fast commit</a>. (with this option you can miss some modified files)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim ci -s -c "My commit comment"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can display the history of the modifications using the <code>log</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim log</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_most_common_use_cases">4. Most Common use cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fim can be used for different kind of use cases.</p>
</div>
<div class="sect2">
<h3 id="_managing_a_workspace">4.1. Managing a workspace</h3>
<div class="ulist">
<ul>
<li>
<p>Manage directories filled with binary. For example: pictures, music or movies</p>
</li>
<li>
<p>Know the status of a workspace in which we work episodically</p>
</li>
<li>
<p>Track changes over time</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Personally I use Fim to manage my photos and videos.
When I have new photos, I put them at the right place in my pictures folder and then I do <code>fim&nbsp;ci</code> from the sub-directory
containing the new photos to record a new State, as I could do with Git.
As I do this from a sub-directory the commit is fast because Fim hashes only the files that I added and creates a new State
by merging those new hashes with the previous State.</p>
</div>
<div class="paragraph">
<p>More details on using Fim from a sub-directory can be found in <a href="#_run_fim_commands_from_a_sub_directory">Run Fim commands from a sub-directory</a>.</p>
</div>
<div class="paragraph">
<p>The <code>fim status</code> command let me know when I want (even super quickly) if something changed in my pictures folder.</p>
</div>
</div>
<div class="sect2">
<h3 id="_duplicates_detection_and_removal">4.2. Duplicates detection and removal</h3>
<div class="paragraph">
<p>Fim detects duplicate files and distinguishes two cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Duplicates inside a Fim repository:<br>
Fim can detect and remove them</p>
</li>
<li>
<p>Duplicates that are outside:<br>
Useful to cleanup desynchronized old backups</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More details in <a href="#_dealing_with_duplicates">Dealing with duplicates</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_backup_integrity">4.3. Backup integrity</h3>
<div class="paragraph">
<p>For offline long term backups Fim can be used to perform and store a hash of all the files in order to insure the backup integrity.<br>
More details in <a href="#_why_do_you_need_fim">Why do you need Fim</a>
and <a href="#_hardware_corruption_detection">Hardware corruption detection</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fim_usage">5. Fim usage</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>$ fim --help

usage: fim &lt;command&gt; [-c &lt;arg&gt;] [-d &lt;arg&gt;] [-e] [-f] [-h] [-i &lt;arg&gt;] [-l] [-m &lt;arg&gt;] [-n] [-o &lt;arg&gt;] [-p] [-q] [-s] [-t
       &lt;arg&gt;] [-v] [-y]

File Integrity Checker

Available commands:
     init                       Initialize a Fim repository and create the first State
     ci / commit                Commit the current directory State
     st / status                Display the difference between the current directory State with the previous one.
                                You can get a quick result by using the -f or -s or -n options
     diff                       Deprecated command that is an alias on the 'status' command for backward compatibility
     rfa / reset-file-attrs     Reset the files attributes like they were stored in the last committed State
     dcor / detect-corruption   Find changes most likely caused by a hardware corruption or a filesystem bug.
                                Change in content, but not in creation time and last modified time
     fdup / find-duplicates     Find local duplicate files in the Fim repository
     rdup / remove-duplicates   Remove duplicates found by the 'fdup' command.
                                If you specify the '-m' option it removes duplicates based on a master repository
     log                        Display the history of the States with the same output as the 'status' command
     dign / display-ignored     Display the files or directories that are ignored into the last State
     rbk / rollback             Rollback the last commit. It will remove the last State
     pst / purge-states         Purge previous States
     help                       Prints the Fim help
     version                    Prints the Fim version

Available options:
     -c,--comment &lt;arg&gt;                 Comment to set during init and commit
     -d,--directory &lt;arg&gt;               Run Fim into the specified directory
     -e,--errors                        Display execution error details
     -f,--fast-mode                     Use fast mode. Hash only 3 medium blocks.
                                        One at the beginning, one in the middle and one at the end
     -h,--help                          Prints the Fim help
     -i,--ignore &lt;arg&gt;                  Ignore some difference during State comparison. You can ignore:
                                        - attrs: File attributes
                                        - dates: Modification and creation dates
                                        - renamed: Renamed files
                                        - all: All of the above
                                        You can specify multiple kind of difference to ignore separated by a comma.
                                        For example: -i attrs,dates,renamed
     -l,--use-last-state                Use the last committed State.
                                        Both for the 'find-duplicates' and 'remove-duplicates' commands
     -m,--master-fim-repository &lt;arg&gt;   Fim repository directory that you want to use as remote master.
                                        Only for the 'remove-duplicates' command
     -n,--do-not-hash                   Do not hash file content. Uses only file names and modification dates
     -o,--output-max-lines &lt;arg&gt;        Change the maximum number lines displayed for the same kind of modification.
                                        Default value is 200 lines
     -p,--purge-states                  Purge previous States if the commit succeed
     -q,--quiet                         Do not display details
     -s,--super-fast-mode               Use super-fast mode. Hash only 3 small blocks.
                                        One at the beginning, one in the middle and one at the end
     -t,--thread-count &lt;arg&gt;            Number of thread used to hash file contents in parallel
     -v,--version                       Prints the Fim version
     -y,--always-yes                    Always yes to every questions</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_can_you_use_fim">6. How can you use Fim</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_download_a_fim_release">6.1. Download a Fim release</h3>
<div class="paragraph">
<p>You can download a prebuilt release of Fim from the <a href="https://github.com/evrignaud/fim/releases/latest"><span class="image"><img src="images/icons/download.png" alt="Download"></span> Latest release</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_fim_changelog">6.2. Fim changelog</h3>
<div class="sect3">
<h4 id="_version_1_2_1">6.2.1. Version 1.2.1</h4>
<div class="paragraph">
<p><strong>(Released 2016-10-10)</strong></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/evrignaud/fim/tree/1.2.1"><span class="image"><img src="images/icons/octocat.png" alt="GitHub"></span> Sources</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/compare/1.2.0%2E%2E%2E1.2.1"><span class="image"><img src="images/icons/list.png" alt="List"></span> Full Changelog</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/releases/tag/1.2.1"><span class="image"><img src="images/icons/package.png" alt="Package"></span> Download</a></p>
</div>
<div class="sect4">
<h5 id="_general">General</h5>
<div class="ulist">
<ul>
<li>
<p>'diff' command deprecated in favor of the 'status' command</p>
</li>
<li>
<p>Fix <a href="https://github.com/evrignaud/fim/issues/6">issue #6</a> - Add commitDetails into the State in order to display more details regarding each commit while running 'fim log'.
The 'log' command displays now the same output as the 'status' command. It works completely with States generated with this version of Fim</p>
</li>
<li>
<p>Thanks to @ch3v, clarified the 'find-duplicates' command output and sort duplicate sets by wasted space to display the biggest first</p>
</li>
<li>
<p>Fim is now able to <strong>remove duplicates</strong> that are in the repository see more in <a href="#_delete_duplicates_from_a_workspace">Delete duplicates from a workspace</a></p>
</li>
<li>
<p>Add <a href="http://evrignaud.github.io/fim/slides/fr">French slides</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_bug_fix">Bug fix</h5>
<div class="ulist">
<ul>
<li>
<p>Update memory maximum sizes to more accurate values</p>
</li>
<li>
<p>In <code>fim-docker</code>, don&#8217;t use the <code>realpath</code> command that is not installed by default</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_version_1_2_0">6.2.2. Version 1.2.0</h4>
<div class="paragraph">
<p><strong>(Released 2016-05-23)</strong></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/evrignaud/fim/tree/1.2.0"><span class="image"><img src="images/icons/octocat.png" alt="GitHub"></span> Sources</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/compare/1.1.0%2E%2E%2E1.2.0"><span class="image"><img src="images/icons/list.png" alt="List"></span> Full Changelog</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/releases/tag/1.2.0"><span class="image"><img src="images/icons/package.png" alt="Package"></span> Download</a></p>
</div>
<div class="sect4">
<h5 id="_global_improvement_of_the_performance">Global improvement of the performance</h5>
<div class="ulist">
<ul>
<li>
<p><strong>Decrease the State size</strong> in memory and on the disc by using Ascii85 instead of Hexa to store hash. Each hash string length is now 80 instead of 128.</p>
</li>
<li>
<p>Add <strong>Super-fast commit</strong> support see more in <a href="#_super_fast_commit">Super-fast commit</a></p>
</li>
<li>
<p>Allow to <strong>manage a very big amount a files</strong> (1 098 138 files is working for me)</p>
</li>
<li>
<p><strong>Optimisation of the State comparison</strong> to be able to compare quickly two States that contains 1 000 000 files</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_general_2">General</h5>
<div class="ulist">
<ul>
<li>
<p>Fim is now distributed as <strong>Docker image</strong> on Docker Hub see more in <a href="#_run_fim_using_docker">Run Fim using Docker</a></p>
</li>
<li>
<p>Add the <strong><code>--directory</code></strong> option to be able to specify where to run Fim commands</p>
</li>
<li>
<p>Every commit on Fim is now tested on <strong>Mac OS X</strong> thanks to the Travis Mac builder</p>
</li>
<li>
<p>Run static code analysis on <strong>Sonar</strong> and <strong>Coverity</strong></p>
</li>
<li>
<p>Add the <strong><code>--purge-states</code></strong> option that purge previous States if the commit succeed</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_bug_fix_2">Bug fix</h5>
<div class="ulist">
<ul>
<li>
<p>Check access rights for the <code>.fim</code> directory before executing every command</p>
</li>
<li>
<p>Ignore the milliseconds for date modification comparison because some JDK don&#8217;t retrieve them and set them to 0</p>
</li>
<li>
<p>By default truncate output to 200 lines of the same kind. <code>--output-max-lines</code> option added to modify this</p>
</li>
<li>
<p>Empty files are not seen as duplicates</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_migrating_from_1_1_0_to_1_2_0">Migrating from 1.1.0 to 1.2.0</h5>
<div class="paragraph">
<p>State format is modified and not compatible. You need the rehash the complete repository.<br>
To migrate type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim ci -y -c "Migrate to Fim 1.2.0"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_version_1_1_0">6.2.3. Version 1.1.0</h4>
<div class="paragraph">
<p><strong>(Released 2015-11-01)</strong></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/evrignaud/fim/tree/1.1.0"><span class="image"><img src="images/icons/octocat.png" alt="GitHub"></span> Sources</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/compare/1.0.2%2E%2E%2E1.1.0"><span class="image"><img src="images/icons/list.png" alt="List"></span> Full Changelog</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/releases/tag/1.1.0"><span class="image"><img src="images/icons/package.png" alt="Package"></span> Download</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bug Fix</p>
</li>
<li>
<p>Complete rewrite of the Hash algorithm in order to hash one block at the beginning, one in the middle and one at the end.
Details in <a href="#_how_does_it_work">How does it work</a></p>
</li>
<li>
<p>Fix <a href="https://github.com/evrignaud/fim/issues/2">issue #2</a> - Add the 'fim dcor' command that find changes most likely caused by a hardware corruption or a filesystem bug.
Change in content, but not in creation time and last modified time.
Details in <a href="#_hardware_corruption_detection">Hardware corruption detection</a></p>
</li>
<li>
<p>Fix <a href="https://github.com/evrignaud/fim/issues/3">issue #3</a> - If available, store the SELinux label of each file.
Details in <a href="#_file_permissions_management">File permissions management</a></p>
</li>
<li>
<p>Fix <a href="https://github.com/evrignaud/fim/issues/4">issue #4</a> - Fix <code>fim</code> shell script for Mac OS X</p>
</li>
<li>
<p>Add the ability to ignore files or directory using a <code>.fimignore</code> file.
Details in <a href="#_ignoring_files_or_directories">Ignoring files or directories</a></p>
</li>
<li>
<p>Add automatic build and testing of Fim using Travis CI for <a href="https://goo.gl/QfQTE8">Linux</a> and Appveyor CI for <a href="https://goo.gl/foWAWQ">Windows</a></p>
</li>
<li>
<p>Add Unit test coverage using <a href="https://goo.gl/hJGXqj">Coveralls</a></p>
</li>
<li>
<p>Moved the documentation to AsciiDoc using the <a href="http://asciidoctor.org/docs/asciidoctor-maven-plugin/">asciidoctor-maven-plugin</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_version_1_0_2">6.2.4. Version 1.0.2</h4>
<div class="paragraph">
<p><strong>(Released 2015-09-04)</strong></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/evrignaud/fim/tree/1.0.2"><span class="image"><img src="images/icons/octocat.png" alt="GitHub"></span> Sources</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/compare/1.0.1%2E%2E%2E1.0.2"><span class="image"><img src="images/icons/list.png" alt="List"></span> Full Changelog</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/releases/tag/1.0.2"><span class="image"><img src="images/icons/package.png" alt="Package"></span> Download</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fix <a href="https://github.com/evrignaud/fim/issues/1">issue #1</a>:
Hash the second 4 KB / 1 MB block to ensure that the headers don&#8217;t increase the collision probability when doing a rapid check.</p>
</li>
<li>
<p>Clarified the documentation</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_version_1_0_1">6.2.5. Version 1.0.1</h4>
<div class="paragraph">
<p><strong>(Released 2015-08-26)</strong></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/evrignaud/fim/tree/1.0.1"><span class="image"><img src="images/icons/octocat.png" alt="GitHub"></span> Sources</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/compare/1.0.0%2E%2E%2E1.0.1"><span class="image"><img src="images/icons/list.png" alt="List"></span> Full Changelog</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/releases/tag/1.0.1"><span class="image"><img src="images/icons/package.png" alt="Package"></span> Download</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bug Fix</p>
</li>
<li>
<p>Update the State format in order to improve Fim commands. It allows for example to display more details in the <code>log</code> command</p>
</li>
<li>
<p>Add the ability to run Fim from a sub-directory</p>
</li>
<li>
<p>Add Global hash mode to be able to change the default Fim behavior</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_version_1_0_0">6.2.6. Version 1.0.0</h4>
<div class="paragraph">
<p><strong>(Released 2015-07-29)</strong></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/evrignaud/fim/tree/1.0.0"><span class="image"><img src="images/icons/octocat.png" alt="GitHub"></span> Sources</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/compare/Initial_commit%2E%2E%2E1.0.0"><span class="image"><img src="images/icons/list.png" alt="List"></span> Full Changelog</a>
&nbsp;&nbsp; - &nbsp;&nbsp;
<a href="https://github.com/evrignaud/fim/releases/tag/1.0.0"><span class="image"><img src="images/icons/package.png" alt="Package"></span> Download</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>First release of Fim</strong></p>
</li>
<li>
<p>Setup all the basis to allow adding more and more stuff around the States</p>
</li>
<li>
<p>Provides mainly <code>init</code>, <code>commit</code> and <code>diff</code> commands</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_run_fim_using_docker">6.3. Run Fim using Docker</h3>
<div class="paragraph">
<p>If you don&#8217;t have Java and you don&#8217;t want to install it (or you don&#8217;t have the required version of Java), you can run Fim using a Docker image.<br>
All the environment required to run Fim is inside the Docker image. Just pull the image and run Fim.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<img src="images/icons/important.png" alt="Important">
</td>
<td class="content">
<div class="paragraph">
<p>The Docker image runs only on Linux</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_using_the_latest_published_docker_image">6.3.1. Using the latest published Docker image</h4>
<div class="paragraph">
<p>Fim releases are published as Docker images on <a href="https://hub.docker.com/r/evrignaud/fim/">Docker Hub</a>.<br>
You can use them like this.</p>
</div>
<div class="sect4">
<h5 id="_retrieve_the_code_fim_docker_code_script">Retrieve the <code>fim-docker</code> script:</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ curl goo.gl/XwERDY -L -o fim-docker &amp;&amp; chmod a+rx fim-docker</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_run_it">Run it:</h5>
<div class="paragraph">
<p>This script takes the same arguments as the <code>fim</code> one.<br>
If you don&#8217;t have the Fim Docker image locally it will pull the image first.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ ./fim-docker -h</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use the latest version of the Fim Docker image you can pull it manually:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ docker pull evrignaud/fim</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_your_own_docker_image">6.3.2. Creating your own Docker Image</h4>
<div class="paragraph">
<p>After having build Fim (<a href="#_build_fim">see below</a>), type the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ ./build-docker-image</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can use the provided <code>fim-docker</code> script.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build_fim">6.4. Build Fim</h3>
<div class="paragraph">
<p>You can build Fim yourself to try the master version.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<img src="images/icons/important.png" alt="Important">
</td>
<td class="content">
<div class="paragraph">
<p>Fim comes with versioned prebuilt release. I recommend using them as they are OK to be used.<br>
If you clone Fim&#8217;s master, a SNAPSHOT is retrieved and there is no guarantee that this particular build of Fim will work properly.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Get the code</p>
<div class="ulist">
<ul>
<li>
<p>Download the <a href="https://github.com/evrignaud/fim/zipball/master">.zip</a> or the <a href="https://github.com/evrignaud/fim/tarball/master">.tar.gz</a></p>
</li>
<li>
<p>Or clone it using <code><a href="https://github.com/evrignaud/fim.git" class="bare">https://github.com/evrignaud/fim.git</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Build it by typing the following command (follow <a href="#_step_by_step_procedure">this procedure</a> for more details):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">mvn clean install</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You can run the jar file generated into the <code>target</code> directory using
the two shell script files located in the root directory.</p>
<div class="ulist">
<ul>
<li>
<p><code>fim</code> for Linux or Mac OS X</p>
</li>
<li>
<p><code>fim.bat</code> for Windows</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>It generates also two distribution files into the <code>target/dist</code> directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ ls -a1 target/dist/
fim-1.1.0-SNAPSHOT-distribution.tar.gz
fim-1.1.0-SNAPSHOT-distribution.zip</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_step_by_step_procedure">6.4.1. Step by step procedure</h4>
<div class="paragraph">
<p>Here are some tips on how you can build Fim easily.</p>
</div>
<div class="sect4">
<h5 id="_getting_maven">Getting Maven</h5>
<div class="paragraph">
<p>If you don&#8217;t have Maven, you can either download it from <a href="http://maven.apache.org/index.html">the Apache website</a> or use a packages manager.</p>
</div>
<div class="sect5">
<h6 id="_for_linux">For Linux</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ sudo apt-get install maven</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_for_mac_os_x">For Mac OS X</h6>
<div class="paragraph">
<p>First install <a href="http://brew.sh">Homebrew</a> if you don&#8217;t have it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then install Maven.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ brew install maven</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you need to add the <code>maven/bin</code> directory into your <code>PATH</code>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_clone_fim">Clone Fim</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd
$ mkdir projects
$ cd projects
$ git clone https://github.com/evrignaud/fim.git
$ cd fim</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_build_fim_2">Build Fim</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ mvn clean install</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_now_fim_is_ready">Now Fim is ready</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ ./fim</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="simple-example"></a>&nbsp;</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simple_example">7. Simple example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is a step by step example of Fim usage.
For the purpose of this example we use small files.</p>
</div>
<div class="paragraph">
<p>You can try it yourself by using the <a href="https://github.com/evrignaud/fim/blob/master/samples/simple-example.sh"><code>samples/simple-example.sh</code></a> script.</p>
</div>
<div class="sect2">
<h3 id="_step_by_step">7.1. Step by step</h3>
<div class="sect3">
<h4 id="_create_a_set_of_files">7.1.1. Create a set of files</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">~$ mkdir simple-example

~$ cd simple-example/

# Creates 10 files
simple-example$ for i in 01 02 03 04 05 06 07 08 09 10 ; do echo "New File $i" &gt; file${i} ; done

simple-example$ ls -la
total 48
drwxrwxr-x 2 evrignaud evrignaud 4096 mai    9 21:58 .
drwx------ 3 evrignaud evrignaud 4096 mai    9 21:58 ..
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file01
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file02
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file03
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file04
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file05
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file06
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file07
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file08
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file09
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file10</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_initialize_the_fim_repository">7.1.2. Initialize the Fim repository</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim init -c 'First State'
2016/05/09 21:58:36 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/09 21:58:36 - Info  - Scanned 10 files (120 bytes), hashed 120 bytes (avg 120 bytes/s), during 00:00:00

Added:            file01
Added:            file02
Added:            file03
Added:            file04
Added:            file05
Added:            file06
Added:            file07
Added:            file08
Added:            file09
Added:            file10

10 added</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_a_new_code_fim_code_directory_is_created">7.1.3. A new <code>.fim</code> directory is created</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ ls -la
total 52
drwxrwxr-x 3 evrignaud evrignaud 4096 mai    9 21:58 .
drwx------ 3 evrignaud evrignaud 4096 mai    9 21:58 ..
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file01
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file02
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file03
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file04
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file05
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file06
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file07
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file08
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file09
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file10
drwxrwxr-x 3 evrignaud evrignaud 4096 mai    9 21:58 .fim</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_do_some_modifications">7.1.4. Do some modifications</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ mkdir dir01

# Move file01 to dir01
simple-example$ mv file01 dir01

# Change the file02 modification date
simple-example$ touch file02

# Duplicate twice file03
simple-example$ cp file03 file03.dup1
simple-example$ cp file03 file03.dup2

# Add content to file04
simple-example$ echo foo &gt;&gt; file04

# Copy file05
simple-example$ cp file05 file11

# And add content to it
simple-example$ echo bar &gt;&gt; file05

# Remove file06
simple-example$ rm file06

# Duplicate once file07
simple-example$ cp file07 file07.dup1

# Create the new file12
simple-example$ echo "New File 12" &gt; file12</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the content of the directories after the modifications.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ ls -la
total 68
drwxrwxr-x 4 evrignaud evrignaud 4096 mai    9 21:58 .
drwx------ 3 evrignaud evrignaud 4096 mai    9 21:58 ..
drwxrwxr-x 2 evrignaud evrignaud 4096 mai    9 21:58 dir01
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file02
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file03
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file03.dup1
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file03.dup2
-rw-rw-r-- 1 evrignaud evrignaud   16 mai    9 21:58 file04
-rw-rw-r-- 1 evrignaud evrignaud   16 mai    9 21:58 file05
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file07
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file07.dup1
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file08
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file09
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file10
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file11
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file12
drwxrwxr-x 3 evrignaud evrignaud 4096 mai    9 21:58 .fim

simple-example$ ls -la dir01/
total 12
drwxrwxr-x 2 evrignaud evrignaud 4096 mai    9 21:58 .
drwxrwxr-x 4 evrignaud evrignaud 4096 mai    9 21:58 ..
-rw-rw-r-- 1 evrignaud evrignaud   12 mai    9 21:58 file01</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_fim_detects_the_modifications">7.1.5. Fim detects the modifications</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim st
2016/05/09 21:58:36 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/09 21:58:36 - Info  - Scanned 14 files (176 bytes), hashed 176 bytes (avg 176 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/09 21:58:36
Comment: First State

Added:            file12
Copied:           file11 	(was file05)
Duplicated:       file03.dup1 = file03
Duplicated:       file03.dup2 = file03
Duplicated:       file07.dup1 = file07
Date modified:    file02 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file04 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file05 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Renamed:          file01 -&gt; dir01/file01
Deleted:          file06

1 added, 1 copied, 3 duplicated, 1 date modified, 2 content modified, 1 renamed, 1 deleted</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_search_for_duplicate_files">7.1.6. Search for duplicate files</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim fdup
2016/05/09 21:58:37 - Info  - Searching for duplicate files

2016/05/09 21:58:37 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/09 21:58:37 - Info  - Scanned 14 files (176 bytes), hashed 176 bytes (avg 176 bytes/s), during 00:00:00

- Duplicate set #1: duplicated 2 times, 12 bytes each, 24 bytes of wasted space
      file03
      file03.dup1
      file03.dup2

- Duplicate set #2: duplicated 1 time, 12 bytes each, 12 bytes of wasted space
      file07
      file07.dup1

3 duplicate files spread into 2 duplicate sets, 36 bytes of total wasted space</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_from_the_code_dir01_code_sub_directory">7.1.7. From the <code>dir01</code> sub-directory</h4>
<div class="paragraph">
<p>You can run Fim on a subset of the repository.<br>
More details on using Fim from a sub-directory can be found in <a href="#_run_fim_commands_from_a_sub_directory">Run Fim commands from a sub-directory</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ cd dir01</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside this directory only one file is seen as added.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example/dir01$ fim st
2016/05/09 21:58:37 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
2016/05/09 21:58:37 - Info  - Scanned 1 file (12 bytes), hashed 12 bytes (avg 12 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/09 21:58:36
Comment: First State

Added:            dir01/file01

1 added</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are no duplicate file as we are looking only inside <code>dir01</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example/dir01$ fim fdup
2016/05/09 21:58:37 - Info  - Searching for duplicate files

2016/05/09 21:58:37 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
2016/05/09 21:58:38 - Info  - Scanned 1 file (12 bytes), hashed 12 bytes (avg 12 bytes/s), during 00:00:00

No duplicate file found</code></pre>
</div>
</div>
<div class="paragraph">
<p>Commit only the local modifications done inside this directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example/dir01$ fim ci -c 'Modifications from dir01' -y
2016/05/09 21:58:38 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
2016/05/09 21:58:38 - Info  - Scanned 1 file (12 bytes), hashed 12 bytes (avg 12 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/09 21:58:36
Comment: First State

Added:            dir01/file01

1 added</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are no more local modifications.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example/dir01$ fim st
2016/05/09 21:58:38 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
2016/05/09 21:58:38 - Info  - Scanned 1 file (12 bytes), hashed 12 bytes (avg 12 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/09 21:58:38
Comment: Modifications from dir01

Nothing modified</code></pre>
</div>
</div>
<div class="paragraph">
<p>Return into the parent directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example/dir01$ cd ..</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_commit_the_modifications">7.1.8. Commit the modifications</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim ci -c 'All modifications' -y
2016/05/09 21:58:39 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/09 21:58:39 - Info  - Scanned 14 files (176 bytes), hashed 176 bytes (avg 176 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/09 21:58:38
Comment: Modifications from dir01

Added:            file12
Copied:           file11 	(was file05)
Duplicated:       file03.dup1 = file03
Duplicated:       file03.dup2 = file03
Duplicated:       file07.dup1 = file07
Date modified:    file02 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file04 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file05 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Deleted:          file01
Deleted:          file06

1 added, 1 copied, 3 duplicated, 1 date modified, 2 content modified, 2 deleted</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nothing_is_modified_now">7.1.9. Nothing is modified now</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim st
2016/05/09 21:58:39 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/09 21:58:39 - Info  - Scanned 14 files (176 bytes), hashed 176 bytes (avg 176 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/09 21:58:39
Comment: All modifications

Nothing modified</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_fim_log">7.2. The Fim log</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim log
- State #1: 2016/05/09 21:58:36 (10 files - 120 bytes)
	Comment: First State

Added:            file01
Added:            file02
Added:            file03
Added:            file04
Added:            file05
Added:            file06
Added:            file07
Added:            file08
Added:            file09
Added:            file10

10 added

- State #2: 2016/05/09 21:58:38 (11 files - 132 bytes)
	Comment: Modifications from dir01

Added:            dir01/file01
Added:            file01
Added:            file02
Added:            file03
Added:            file04
Added:            file05
Added:            file06
Added:            file07
Added:            file08
Added:            file09
Added:            file10

11 added

- State #3: 2016/05/09 21:58:39 (14 files - 176 bytes)
	Comment: All modifications

Added:            file12
Copied:           file11 	(was file05)
Duplicated:       file03.dup1 = file03
Duplicated:       file03.dup2 = file03
Duplicated:       file07.dup1 = file07
Date modified:    file02 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file04 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file05 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Deleted:          file01
Deleted:          file06

1 added, 1 copied, 3 duplicated, 1 date modified, 2 content modified, 2 deleted</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rollback_all_the_commit">7.3. Rollback all the commit</h3>
<div class="paragraph">
<p>Rollback the last commit.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim rbk -y
You are going to rollback the last commit. State #3 will be removed

- State #3: 2016/05/09 21:58:39 (14 files - 176 bytes)
	Comment: All modifications

Added:            file12
Copied:           file11 	(was file05)
Duplicated:       file03.dup1 = file03
Duplicated:       file03.dup2 = file03
Duplicated:       file07.dup1 = file07
Date modified:    file02 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file04 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file05 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Deleted:          file01
Deleted:          file06

1 added, 1 copied, 3 duplicated, 1 date modified, 2 content modified, 2 deleted</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rollback again.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim rbk -y
You are going to rollback the last commit. State #2 will be removed

- State #2: 2016/05/09 21:58:38 (11 files - 132 bytes)
	Comment: Modifications from dir01

Added:            dir01/file01
Added:            file01
Added:            file02
Added:            file03
Added:            file04
Added:            file05
Added:            file06
Added:            file07
Added:            file08
Added:            file09
Added:            file10

11 added</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nothing more to rollback.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim rbk -y
2016/05/09 21:58:40 - Info  - No commit to rollback</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_commit_using_super_fast_mode">7.4. Commit using super-fast mode</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim ci -s -c 'Commit modifications very quickly using super-fast commit' -y
2016/05/09 21:58:40 - Info  - Scanning recursively local files, using 'super-fast' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/09 21:58:41 - Info  - Scanned 14 files (176 bytes), hashed 176 bytes (avg 176 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/09 21:58:36
Comment: First State

Added:            file12
Copied:           file11 	(was file05)
Duplicated:       file03.dup1 = file03
Duplicated:       file03.dup2 = file03
Duplicated:       file07.dup1 = file07
Date modified:    file02 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file04 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file05 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Renamed:          file01 -&gt; dir01/file01
Deleted:          file06

1 added, 1 copied, 3 duplicated, 1 date modified, 2 content modified, 1 renamed, 1 deleted

2016/05/09 21:58:41 - Info  - Retrieving the missing hash for all the modified files, using 'full' mode and 2 threads
2016/05/09 21:58:41 - Info  - Scanned 8 files (104 bytes), hashed 104 bytes (avg 104 bytes/s), during 00:00:00</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, files are too short, commit in super-fast mode is not more efficient.<br>
But with huge files it makes a big difference.</p>
</div>
</div>
<div class="sect2">
<h3 id="_again_nothing_is_modified_now">7.5. Again, nothing is modified now</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim st
2016/05/09 21:58:41 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/09 21:58:41 - Info  - Scanned 14 files (176 bytes), hashed 176 bytes (avg 176 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/09 21:58:40
Comment: Commit modifications very quickly using super-fast commit

Nothing modified</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_display_the_fim_log">7.6. Display the Fim log</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim log
- State #1: 2016/05/09 21:58:36 (10 files - 120 bytes)
	Comment: First State

Added:            file01
Added:            file02
Added:            file03
Added:            file04
Added:            file05
Added:            file06
Added:            file07
Added:            file08
Added:            file09
Added:            file10

10 added

- State #2: 2016/05/09 21:58:40 (14 files - 176 bytes)
	Comment: Commit modifications very quickly using super-fast commit

Added:            file12
Copied:           file11 	(was file05)
Duplicated:       file03.dup1 = file03
Duplicated:       file03.dup2 = file03
Duplicated:       file07.dup1 = file07
Date modified:    file02 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file04 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Content modified: file05 	last modified: 2016/05/09 21:58:33 -&gt; 2016/05/09 21:58:36
Renamed:          file01 -&gt; dir01/file01
Deleted:          file06

1 added, 1 copied, 3 duplicated, 1 date modified, 2 content modified, 1 renamed, 1 deleted</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_state_file_content">7.7. State file content</h3>
<div class="paragraph">
<p>Here is an extract of the State&#8217;s 2 content. To simplify reading, hashes are shortened and only one file entry is kept.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ zmore .fim/states/state_2.json.gz
{
  "stateHash": "WKE\\VP&lt;9...`$SnPo",
  "modelVersion": "4",
  "timestamp": 1462827520971,
  "comment": "Commit modifications very quickly using super-fast commit",
  "fileCount": 14,
  "filesContentLength": 176,
  "hashMode": "hashAll",
  "modificationCounts": {
    "added": 1,
    "copied": 1,
    "duplicated": 3,
    "dateModified": 1,
    "contentModified": 2,
    "attributesModified": 0,
    "renamed": 1,
    "deleted": 1
  },
  "ignoredFiles": [
    ".fim/"
  ],
  "fileStates": [
    {
      "fileName": "dir01/file01",
      "fileLength": 12,
      "fileTime": {
        "creationTime": 1462823913000,
        "lastModified": 1462823913000
      },
      "modification": "renamed",
      "fileHash": {
        "smallBlockHash": "qH\\4/L...@7&amp;m!=",
        "mediumBlockHash": "qH\\4/L...@7&amp;m!=",
        "fullHash": "qH\\4/L...@7&amp;m!="
      },
      "fileAttributes": {
        "PosixFilePermissions": "rw-rw-r--"
      }
    },

    ...
    # Other file entries have been removed
    ...

  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="real-life-example"></a>&nbsp;</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_real_life_example">8. Real life example</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_initialize_the_big_fim_repository">8.1. Initialize the big Fim repository</h3>
<div class="paragraph">
<p>Here is the output of the initialization of a big Fim repository that contains 297 GB of photos and videos.<br>
In my case <strong>it takes almost 3 hours</strong> to hash all the file contents.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">photos-videos$ fim init -y
No comment provided. You are going to initialize your repository using the default comment.
2015/10/22 19:23:05 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
2015/10/22 19:23:06 - Info  - SELinux is enabled on this system
.................................................................o.o...o......8........O.........oo.
...O....................#.................Oooooooooooo.@.o.o.oo..oo@................o.......88oOoooo
... # Hash progress legend shortened
.................................o.............@ooooo@oooooooooooooooooo.ooooooooooooooooooooooooooo
..............................................
2015/10/22 22:05:50 - Info  - Scanned 41467 files (297 GB), hashed 297 GB (avg 31 MB/s), during 02:42:44

... # File list is skipped as it is too long

41467 added</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_the_status_very_quickly">8.2. Check the status very quickly</h3>
<div class="paragraph">
<p>It is possible to check the status very quickly using the super-fast mode using the <code>-s</code> option that will check only 3 small blocks of 4 KB.<br>
In my case <strong>it takes 17 minutes :=)</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">photos-videos$ fim st -s
2015/10/22 23:15:52 - Info  - Scanning recursively local files, using 'super-fast' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
2015/10/22 23:15:52 - Info  - SELinux is enabled on this system
.................................................................o.o...o......8........O.........oo.
...O....................#.................Oooooooooooo.@.o.o.oo..oo@................o.......88oOoooo
... # Hash progress legend shortened
.................................o.............@ooooo@oooooooooooooooooo.ooooooooooooooooooooooooooo
..............................................
2015/10/22 23:32:57 - Info  - Scanned 41467 files (297 GB), hashed 484 MB (avg 484 KB/s), during 00:17:04

Comparing with the last committed state from 2015/10/22 19:23:06
Comment: Initial State

Nothing modified</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_the_status_more_accurately">8.3. Check the status more accurately</h3>
<div class="paragraph">
<p>Using the super-fast mode can produce inaccurate results. <strong>You can miss some modified files.</strong><br>
To increase accuracy, you can use the fast mode using the <code>-f</code> option that will check 3 medium blocks.<br>
Even if, using this mode increase accuracy, it cannot be completely accurate as we only hash 3 different 1 MB blocks of the files.<br>
This time in my case, <strong>it takes 42 minutes</strong> to check the status.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">photos-videos$ fim st -f
2015/10/22 23:33:22 - Info  - Scanning recursively local files, using 'fast' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
2015/10/22 23:33:23 - Info  - SELinux is enabled on this system
.................................................................o.o...o......8........O.........oo.
...O....................#.................Oooooooooooo.@.o.o.oo..oo@................o.......88oOoooo
... # Hash progress legend shortened
.................................o.............@ooooo@oooooooooooooooooo.ooooooooooooooooooooooooooo
..............................................
2015/10/23 00:15:05 - Info  - Scanned 41467 files (297 GB), hashed 51 GB (avg 21 MB/s), during 00:41:42

Comparing with the last committed state from 2015/10/22 19:23:06
Comment: Initial State

Nothing modified</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_full_status_checking">8.4. Full status checking</h3>
<div class="paragraph">
<p>If you want to be completely sure of the <code>status</code> result, you need to run a full hash of all the file contents using the <code>status</code> command without any option.<br>
This time in my case, <strong>it takes almost 3 hours</strong> as for the <code>init</code> command.</p>
</div>
</div>
<div class="sect2">
<h3 id="_checking_without_hashing">8.5. Checking without hashing</h3>
<div class="paragraph">
<p>There is also the do not hash mode using the <code>-n</code> option that will not hash the file contents.
It helps to detect faster changes but you will be able to detect only file names and file attributes that have changed.<br>
This time in my case, <strong>it takes 46 seconds</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">photos-videos$ fim st -n
2015/10/22 23:14:53 - Info  - Not hashing file content so thread count forced to 1
2015/10/22 23:14:53 - Info  - Scanning recursively local files, using 'do not hash' mode and 1 thread
2015/10/22 23:14:54 - Info  - SELinux is enabled on this system
2015/10/22 23:15:40 - Info  - Scanned 41467 files (297 GB), during 00:00:46

Comparing with the last committed state from 2015/10/22 19:23:06
Comment: Initial State

Nothing modified</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_super_fast_commit">9. Super-fast commit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fim is able to commit using the super-fast mode (or fast mode). In that case, it checks into the repository for modifications using the selected mode.<br>
And then it do a full hash of the modified files in order to fill up the missing hash.<br>
<strong>Using Super-fast commit allow to save a lot of time.</strong> With this option you can miss some modified files.</p>
</div>
<div class="paragraph">
<p>This means that even if the global hash mode of your repository is hash all, you can commit using either fast mode or super-fast mode.</p>
</div>
<div class="paragraph">
<p>Super-fast commit example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim init -y -c "Create the repository slowly in full mode"
Info  - Scanning recursively local files, using 'full' mode and 2 threads
...

# Do some modifications

$ fim ci -s -y -c "Commit modifications very quickly using super-fast commit"
Info  - Scanning recursively local files, using 'super-fast' mode and 2 threads
...
Info  - Retrieving the missing hash for all the modified files, using 'full' mode and 2 threads
...

# Do some modifications

$ fim ci -f -y -c "Commit modifications quickly using fast commit"
Info  - Scanning recursively local files, using 'fast' mode and 2 threads
...
Info  - Retrieving the missing hash for all the modified files, using 'full' mode and 2 threads
...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dealing_with_duplicates">10. Dealing with duplicates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Duplicate files are addressed by Fim in two different ways.</p>
</div>
<div class="sect2">
<h3 id="_duplicates_inside_a_fim_repository">10.1. Duplicates inside a Fim repository</h3>
<div class="paragraph">
<p>Fim allow you to detect duplicates using the <code>fdup</code> command.</p>
</div>
<div class="paragraph">
<p>You can also remove them.</p>
</div>
<div class="sect3">
<h4 id="_find_duplicates">10.1.1. Find duplicates</h4>
<div class="paragraph">
<p>Fim is able to display duplicates contained in a repository using the <code>fdup</code> (<code>find-duplicates</code>) command.
It displays the list of duplicate files.<br>
See it in action in <a href="#_search_for_duplicate_files">Search for duplicate files</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim fdup</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the current State is already commited, you can skip the workspace scanning phase with the <code>-l</code> option :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim fdup -l</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_remove_duplicates">10.1.2. Remove duplicates</h4>
<div class="paragraph">
<p>You can remove duplicate files.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Either interactive:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim rdup</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Or automatically preserving the first file in the list:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim rdup -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>In both cases, it is possible to use the current State as with <code>fdup</code> by adding the <code>-l</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim rdup -l</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_duplicates_that_are_outside">10.2. Duplicates that are outside</h3>
<div class="paragraph">
<p>Fim can delete duplicate files contained in another repository.<br>
It can be useful if you want to cleanup old backups that are no more synchronized and you want to be sure to not lose any files that could have been modified or added.<br>
It erases all files locally that already exist in the master workspace.</p>
</div>
<div class="paragraph">
<p>For example, <code>backup</code> is a copy of the repository named <code>source</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd backup
$ fim rdup -m ../source</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the workspace to clean is remote, you can just copy the <code>.fim</code> in an empty directory and set it as parameter to the <code>-m</code> option of the <code>rdup</code> command</p>
</div>
<div class="sect3">
<h4 id="_simple_duplicates_removing">10.2.1. Simple duplicates removing</h4>
<div class="paragraph">
<p>Here is a step by step example of duplicates removing.
For the purpose of this example we use small files.</p>
</div>
<div class="paragraph">
<p>You can try it yourself by using the <a href="https://github.com/evrignaud/fim/blob/master/samples/remove-duplicates-example.sh"><code>samples/remove-duplicates-example.sh</code></a> script.</p>
</div>
<div class="sect4">
<h5 id="_create_a_source_directory_with_some_files_in_it">Create a source directory with some files in it</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">~$ mkdir rdup-example
~$ cd rdup-example
~/rdup-example$ mkdir source
~/rdup-example$ cd source/
~/rdup-example/source$ for i in 01 02 03 04 05 06 07 08 09 10 ; do echo "New File $i" &gt; file${i} ; done
~/rdup-example/source$ ls -la
total 48
drwxrwxr-x 2 evrignaud evrignaud 4096 mai   21 08:39 .
drwxrwxr-x 3 evrignaud evrignaud 4096 mai   21 08:39 ..
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file01
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file02
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file03
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file04
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file05
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file06
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file07
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file08
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file09
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file10</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_initialize_the_fim_repository_2">Initialize the Fim repository</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">~/rdup-example/source$ fim init -y
No comment provided. You are going to initialize your repository using the default comment.
2016/05/21 08:39:12 - Info  - Scanning recursively local files, using 'full' mode and 4 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/21 08:39:12 - Info  - Scanned 10 files (120 bytes), hashed 120 bytes (avg 120 bytes/s), during 00:00:00

Added:            file01
Added:            file02
Added:            file03
Added:            file04
Added:            file05
Added:            file06
Added:            file07
Added:            file08
Added:            file09
Added:            file10

10 added</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_create_a_backup_of_this_directory">Create a backup of this directory</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">~/rdup-example/source$ cd ..
~/rdup-example$ cp -a source backup</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_modify_two_files_into_the_source_directory_and_move_two_others">Modify two files into the source directory and move two others</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">~/rdup-example$ cd source/

~/rdup-example/source$ echo modif1 &gt;&gt; file02
~/rdup-example/source$ echo modif2 &gt;&gt; file04

~/rdup-example/source$ mkdir subdir
~/rdup-example/source$ mv file01 subdir
~/rdup-example/source$ mv file03 subdir

~/rdup-example/source$ ls -la
total 48
drwxrwxr-x 4 evrignaud evrignaud 4096 mai   21 08:39 .
drwxrwxr-x 4 evrignaud evrignaud 4096 mai   21 08:39 ..
-rw-rw-r-- 1 evrignaud evrignaud   19 mai   21 08:39 file02
-rw-rw-r-- 1 evrignaud evrignaud   19 mai   21 08:39 file04
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file05
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file06
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file07
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file08
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file09
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file10
drwxrwxr-x 3 evrignaud evrignaud 4096 mai   21 08:39 .fim
drwxrwxr-x 2 evrignaud evrignaud 4096 mai   21 08:39 subdir

~/rdup-example/source$ ls -la subdir
total 16
drwxrwxr-x 2 evrignaud evrignaud 4096 mai   21 08:39 .
drwxrwxr-x 4 evrignaud evrignaud 4096 mai   21 08:39 ..
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file01
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file03</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_commit_all_the_modifications">Commit all the modifications</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">~/rdup-example/source$ fim ci -s -c "Modifications"
2016/05/21 08:39:13 - Info  - Scanning recursively local files, using 'super-fast' mode and 4 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/21 08:39:13 - Info  - Scanned 10 files (134 bytes), hashed 134 bytes (avg 134 bytes/s), during 00:00:00

Comparing with the last committed state from 2016/05/21 08:39:12
Comment: Initial State

Content modified: file02
Content modified: file04
Renamed:          file01 -&gt; subdir/file01
Renamed:          file03 -&gt; subdir/file03

2 content modified, 2 renamed

Do you really want to commit (y/n/A)? y
2016/05/21 08:39:14 - Info  - Retrieving the missing hash for all the modified files, using 'full' mode and 4 threads
2016/05/21 08:39:14 - Info  - Scanned 4 files (62 bytes), hashed 62 bytes (avg 62 bytes/s), during 00:00:00</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_remove_the_duplicates">Remove the duplicates</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">~/rdup-example/source$ cd ../backup/
~/rdup-example/backup$ fim rdup -m ../source
2016/05/21 08:39:14 - Info  - Searching for duplicate files using the ../source directory as master

2016/05/21 08:39:14 - Info  - Scanning recursively local files, using 'full' mode and 4 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
.
2016/05/21 08:39:15 - Info  - Scanned 10 files (120 bytes), hashed 120 bytes (avg 120 bytes/s), during 00:00:00

'file01' is a duplicate of '../source/subdir/file01'
Do you really want to remove it (y/n/A)? y
  'file01' removed
'file03' is a duplicate of '../source/subdir/file03'
Do you really want to remove it (y/n/A)? y
  'file03' removed
'file05' is a duplicate of '../source/file05'
Do you really want to remove it (y/n/A)? A
  'file05' removed
'file06' is a duplicate of '../source/file06'
  'file06' removed
'file07' is a duplicate of '../source/file07'
  'file07' removed
'file08' is a duplicate of '../source/file08'
  'file08' removed
'file09' is a duplicate of '../source/file09'
  'file09' removed
'file10' is a duplicate of '../source/file10'
  'file10' removed

8 duplicate files found. 8 duplicate files removed</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<img src="images/icons/important.png" alt="Important">
</td>
<td class="content">
<div class="paragraph">
<p>When you are prompted with a question asking for (y/n/A) which means Yes, No, or All Yes.<br>
'All Yes' will reply Yes to all the remaining questions. You can see it in action above.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_only_the_two_modified_files_remains">Only the two modified files remains</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">~/rdup-example/backup$ ls -la
total 20
drwxrwxr-x 3 evrignaud evrignaud 4096 mai   21 08:39 .
drwxrwxr-x 4 evrignaud evrignaud 4096 mai   21 08:39 ..
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file02
-rw-rw-r-- 1 evrignaud evrignaud   12 mai   21 08:39 file04
drwxrwxr-x 3 evrignaud evrignaud 4096 mai   21 08:39 .fim</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_complex_duplicates_removing">10.2.2. Complex duplicates removing</h4>
<div class="paragraph">
<p>Let say that you have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a directory with a big file tree that we will call the source location.</p>
</li>
<li>
<p>other locations that contain some files that were copied long ago from this source location. We will call one those locations the backup location.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you want to cleanup the backup location from the files that are identical with the ones in the source location.
To find duplicates into the backup location we will use the hash located into the source <code>.fim</code> directory.
We will call master location the name of the directory where is this <code>.fim</code>.<br>
<strong>Most of the time the master location is the source location.</strong><br>
If the source location is not reachable from the backup location, you just need to put a copy of the source <code>.fim</code> directory near the backup location.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="images/icons/note.png" alt="Note">
</td>
<td class="content">
<div class="paragraph">
<p>The backup location can contain also his own <code>.fim</code> directory. It will be ignored.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_step_by_step_2">Step by step</h5>
<div class="ulist">
<ul>
<li>
<p>Go into the source location and ensure that all the hash are up to date:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd &lt;source location&gt;
$ fim ci -y -c "Content added"</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If the backup location cannot reach the source location (so master location is not the source location),
copy the <code>.fim</code> directory that is in the source location into a place near the backup location.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd &lt;somewhere near the backup location&gt;
$ mkdir &lt;master location&gt;
$ scp -rp &lt;remote host&gt;@&lt;source location&gt;/.fim &lt;master location&gt;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<img src="images/icons/important.png" alt="Important">
</td>
<td class="content">
<div class="paragraph">
<p>The source <code>.fim</code> directory can&#8217;t be nested into the root folder of the backup location.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Run the remove duplicates command. For this, go in the backup location.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ cd &lt;backup location&gt;
$ fim rdup -m &lt;master location&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_file_permissions_management">11. File permissions management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Checking the integrity of data files can be good, but we need also to ensure that file permissions are not compromised.</p>
</div>
<div class="paragraph">
<p>Fim is able to save and restore back file permissions.<br>
To do so it stores for each file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://en.wikipedia.org/wiki/Discretionary_access_control">DAC</a> information:</p>
<div class="ulist">
<ul>
<li>
<p>On Linux and Mac OS X file permission like <code>rwxrwxrwx</code> is stored.</p>
</li>
<li>
<p>On Windows the Archive, Hidden, ReadOnly and System attributes are stored.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The <a href="https://en.wikipedia.org/wiki/Mandatory_access_control">MAC</a> information:<br>
Currently the <strong>SELinux label</strong> is stored, if supported by the OS.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can check file permissions using the <code>status</code> command. A quick result can be produced using the do not hash mode (<code>-n</code> option),
but in this case Fim will not be able to detect file permissions change for files that have been renamed.<br>
If some permission has changed and you want to restore them use the <code>rfa</code> command.</p>
</div>
<div class="paragraph">
<p>When you use the same Fim repository with different OS, file permissions that are not supported are ignored.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hardware_corruption_detection">12. Hardware corruption detection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fim is able to detect changes likely caused by a hardware corruption or a filesystem bug.<br>
A file is suspected to be corrupted when his content has changed, but the timestamps are not modified (creation time and modification time).<br>
To run hardware corruption detection use the <code>dcor</code> command.</p>
</div>
<div class="paragraph">
<p>The <code>status</code> command can also be used to check if some file content has changed.<br>
The difference for the <code>dcor</code> command is that only corrupted files are displayed. Files that you way have added or modified are not listed in the result.</p>
</div>
<div class="sect2">
<h3 id="_false_positive">12.1. False positive</h3>
<div class="paragraph">
<p>The <code>dcor</code> command can produce false positive.</p>
</div>
<div class="paragraph">
<p>For example here is a simulation of hardware corruption based on the repository generated for the <a href="#_simple_example">Simple example</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Change the content of a file</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ echo bar &gt;&gt; file05</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Reset the file attributes using the <code>fim rfa</code> command</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim rfa -y
You are going to reset files attributes based on the last committed State done 2015/10/23 07:16:19
Comment: All modifications

2015/10/23 09:18:21 - Info  - SELinux is enabled on this system
Set creation Time: file05 	2015/10/23 09:18:14 -&gt; 2015/10/23 07:16:12
Set last modified: file05 	2015/10/23 09:18:14 -&gt; 2015/10/23 07:16:12

2015/10/23 09:18:21 - Info  - The attributes of 1 file have been reset</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Now <code>file05</code> is suspected to be corrupted</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">simple-example$ fim dcor
2015/10/23 09:19:26 - Info  - Scanning recursively local files, using 'full' mode and 2 threads
(Hash progress legend for files grouped 10 by 10: # &gt; 1 GB, @ &gt; 200 MB, O &gt; 100 MB, 8 &gt; 50 MB, o &gt; 20 MB, . otherwise)
2015/10/23 09:19:27 - Info  - SELinux is enabled on this system
.
2015/10/23 09:19:27 - Info  - Scanned 14 files (164 bytes), hashed 164 bytes (avg 164 bytes/s), during 00:00:00

Comparing with the last committed state from 2015/10/23 07:16:19
Comment: All modifications

Corrupted?:       file05

1 corrupted</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faq">13. FAQ</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_run_fim_commands_from_a_sub_directory">13.1. Run Fim commands from a sub-directory</h3>
<div class="paragraph">
<p>You can run all the Fim commands from every sub-directory inside a Fim repository.
You can see it in action into the <a href="#_from_the_code_dir01_code_sub_directory">Simple example</a>.</p>
</div>
<div class="paragraph">
<p>Doing this allow you to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Quickly find the modifications done in this specific sub-directory. You will hash only the files contained inside and not the complete file tree</p>
</li>
<li>
<p>Quickly commit the modifications done in this sub-directory</p>
</li>
<li>
<p>Quickly find the duplicate files contained in this sub-directory and remove them</p>
</li>
<li>
<p>Quickly reset the attributes of files contained in this sub-directory</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All the other commands will run as if you were on the top of the Fim repository.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ignore_some_difference_during_state_comparison">13.2. Ignore some difference during State comparison</h3>
<div class="paragraph">
<p>You may want to get the status of a repository ignoring some kind of differences.
You can ignore:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>attrs</code>: File attributes</p>
</li>
<li>
<p><code>dates</code>: Modification dates</p>
</li>
<li>
<p><code>renamed</code>: Renamed files</p>
</li>
<li>
<p><code>all</code>: All of the above</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can specify multiple kind of difference to ignore separated by a comma.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim st -i attrs,dates,renamed</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ignoring_files_or_directories">13.3. Ignoring files or directories</h3>
<div class="paragraph">
<p>You can specify files or directories that you want to be ignored by Fim.
For this, you can add a <code>.fimignore</code> file in one of the directories contained into the Fim repository.<br>
You can also set global ignores by creating a <code>.fimignore</code> into the user home directory.</p>
</div>
<div class="paragraph">
<p>Each line of the <code>.fimignore</code> file specifies a pattern. The pattern is mainly a file or directory name.<br>
Use wildcards in order to match many of them. For example <code>*.mp3</code> will match all the files ending with <code>.mp3</code>.<br>
A leading <code>**</code> followed by a slash means match in all directories.<br>
For example, <code>**/foo</code> matches a file or a directory named <code>foo</code> anywhere, starting from where the <code>.fimignore</code> contain this pattern.</p>
</div>
</div>
<div class="sect2">
<h3 id="_changing_default_hash_mode">13.4. Changing default hash mode</h3>
<div class="paragraph">
<p>If you never want to hash the complete content of your files you can set a global hash mode that will indicate the maximum hash mode you want to use for this repository.
You can specify this to the init command:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-f</code>: Sets maximum hash mode to fast. You will be able to use <code>-f</code>, <code>-s</code> or <code>-n</code> after</p>
</li>
<li>
<p><code>-s</code>: Sets maximum hash mode to super-fast. You will be able to use <code>-s</code> or <code>-n</code> after</p>
</li>
<li>
<p><code>-n</code>: Means always don&#8217;t hash anything. You won&#8217;t be able to use other hash mode after</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_example">13.4.1. Example</h4>
<div class="paragraph">
<p>Initialize the Fim repository specifying the global hash mode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim init -f</code></pre>
</div>
</div>
<div class="paragraph">
<p>It sets a global hash mode for the complete repository to fast mode.<br>
All the Fim commands that you use after will use by default the fast hash mode (or less if specified) and you won&#8217;t be able to hash the full file contents.</p>
</div>
<div class="paragraph">
<p>After the init command that we run in our example, you will be able to run the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ fim st    # will run using -f

$ fim st -s

$ fim st -n</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hash_files_in_multi_thread">13.5. Hash files in multi-thread</h3>
<div class="paragraph">
<p>Fim hashes files using several threads.
This allows taking advantage of the computer resources and maximizes the overall performances of file hashing.<br>
By default, Fim use an arbitrary thread count that is the number of CPU core divided by two.<br>
You can specify, using the <code>-t</code> option, the number of thread to be used for file hashing.<br>
The best value depends on the kind of hard disk you have. The more throughput you have, the more thread you can use.</p>
</div>
</div>
<div class="sect2">
<h3 id="_state_integrity">13.6. State integrity</h3>
<div class="paragraph">
<p>Every State file contains a hash of the State content.<br>
If something is modified in the State file, the hash of the State content will change and the State will be reported as corrupted.<br>
Fim won&#8217;t use a corrupted State.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cross_platform_compatibility">13.7. Cross platform compatibility</h3>
<div class="paragraph">
<p>The same Fim repository can be used by either on Linux, Mac OS X and Windows.<br>
State content is normalized and the same State content can be loaded on the different supported OS.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fim_requirements">14. Fim requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tool is written in Java</p>
</div>
<div class="paragraph">
<p>Fim is compiled using Java 8 and require Java 8 to run. You can download Java 8 from the <a href="http://goo.gl/p8iYjm">Java SE Downloads</a>.<br>
You need at least Java 8 Standard Edition JRE. You can also use the OpenJDK 8.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_supported_os">15. Supported OS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fim can be used on Linux, Mac OS X and Windows</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_they_talked_about_it">16. They talked about it</h2>
<div class="sectionbody">
<div class="quoteblock">
<div class="title"><strong>&bull; <span class="image"><img src="images/icons/korben.info.png" alt="Korben.info"></span> &nbsp;&nbsp; <a href="http://goo.gl/1gwX1g">Vérifier l’intégrité de très nombreux fichiers</a></strong></div>
<blockquote>
<div class="paragraph">
<p><strong>Fim (File Integrity Manager)</strong> est un outil vraiment excellent qui permet de gérer l&#8217;intégrité de nombreux fichiers.
<a href="http://goo.gl/1gwX1g">+ Lire la suite</a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><span class="image"><img src="images/icons/english.png" alt="English version"></span> &nbsp;
<a href="http://goo.gl/jBE2XY">Check integrity of many files</a><br>
<strong>Fim (File Integrity Manager)</strong> is a really great tool for managing the integrity of many files.
<a href="http://goo.gl/jBE2XY">+ Read more</a></p>
</div>
</blockquote>
</div>
</blockquote>
</div>
<div class="quoteblock">
<div class="title"><strong>&bull; <span class="image"><img src="images/icons/01net.com.png" alt="01net.com"></span> &nbsp;&nbsp; <a href="http://goo.gl/OYKGxe">Fim (File Integrity Manager)</a></strong></div>
<blockquote>
<div class="paragraph">
<p><strong>Fim (File Integrity Manager)</strong> est un outil open source qui vous permet de vérifier l&#8217;intégrité de tous vos fichiers après les avoir manipulés en lots.
&nbsp;&nbsp;
<a href="http://goo.gl/OYKGxe">+ Lire la suite pour <span class="image"><img src="images/icons/linux.png" alt="Linux"></span></a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="http://goo.gl/Bn2CMH">+ Lire la suite pour <span class="image"><img src="images/icons/windows.png" alt="Windows"></span></a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><span class="image"><img src="images/icons/english.png" alt="English version"></span> &nbsp; <strong>Fim (File Integrity Manager)</strong>
is an open source tool which allows you to check the integrity of all your files after have handled them bulk.
&nbsp;&nbsp;
<a href="http://goo.gl/nhzJxH">+ Read more for <span class="image"><img src="images/icons/linux.png" alt="Linux"></span></a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="http://goo.gl/JwfoPA">+ Read more for <span class="image"><img src="images/icons/windows.png" alt="Windows"></span></a></p>
</div>
</blockquote>
</div>
</blockquote>
</div>
<div class="quoteblock">
<div class="title"><strong>&bull; <span class="image"><img src="images/icons/linuxfr.org.png" alt="linuxfr.org"></span> &nbsp;&nbsp; LinuxFr.org</strong></div>
<blockquote>
<div class="paragraph">
<p>&mdash; <a href="https://goo.gl/UrZK7J">Focus sur les performances avec Fim 1.2.0</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="https://goo.gl/cZsQLN"><span class="image"><img src="images/icons/english.png" alt="English version"></span> &nbsp; Focus on performance with Fim 1.2.0</a></p>
</div>
<div class="paragraph">
<p>&mdash; <a href="https://goo.gl/LAuKqp">Fim 1.1.0</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://goo.gl/KaO0Hm"><span class="image"><img src="images/icons/english.png" alt="English version"></span> &nbsp; Fim 1.1.0</a></p>
</div>
<div class="paragraph">
<p>&mdash; <a href="https://goo.gl/yjMH4U">Sortie de Fim 1.0.2, qui vérifie l&#8217;intégrité de vos fichiers</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://goo.gl/HToiWd"><span class="image"><img src="images/icons/english.png" alt="English version"></span> &nbsp; Fim release 1.0.2, that verifies the integrity of your file</a></p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about">17. About</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Created by Etienne Vrignaud
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="https://goo.gl/5jFdRK"><span class="image"><img src="images/icons/twitter.png" alt="Twitter icon"></span> Follow @evrignaud</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_license">18. License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This project is released under the <a href="LICENSE.html">GPLv3 license</a>, for more details, take a look at the LICENSE file in the source.</p>
</div>
<div class="paragraph">
<p>Basically, that allows you to use all or part of the project for you own business.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-10-10 07:38:29 CEST
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/xcode.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>